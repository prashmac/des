import{_ as z}from"./nuxt-link.IwmG05oB.js";import{_ as N,u as E,a as H,b as R,c as D}from"./useTrackEvent.CLXUss66.js";import{u as B}from"./state.CXkihiS3.js";import{ap as I,y as O,o as c,c as k,a,b as s,w as C,d as W,A as _,j as o,z as j,n as h,F as A,J as S,r as b,h as $,B as T,C as q,E as G,G as J,t as K,s as w,T as y,g as P,M as X}from"./entry.HS_113TQ.js";import{u as Q,X as Y,C as L,e as Z}from"./spring.DFr2K5lH.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const ee=a("small",null,"A",-1),oe=[ee],te=a("small",null,"B",-1),ae=[te],se=a("div",{class:"devlog-header-fill"},null,-1),le={__name:"Header",emits:["handleFollowClick"],setup(m){const d=B("devlogCompact",()=>!1),{y:i}=I(),p=O(()=>i.value>5);return(e,t)=>{const g=z,r=N;return c(),k(A,null,[a("header",{class:h({"devlog-header":!0,"devlog-header--scrolled":o(p)})},[s(g,{class:"devlog-header-link",to:"/"},{default:C(()=>[W("Home")]),_:1}),_("",!0),a("button",{class:"devlog-header-link round",onClick:t[1]||(t[1]=()=>d.value=!1)},oe),s(r,{modelValue:o(d),"onUpdate:modelValue":t[2]||(t[2]=v=>j(d)?d.value=v:null)},null,8,["modelValue"]),a("button",{class:"devlog-header-link round",onClick:t[3]||(t[3]=()=>d.value=!0)},ae),a("button",{class:"devlog-header-link",onClick:t[4]||(t[4]=()=>e.$emit("handleFollowClick"))}," Follow ")],2),se],64)}}},ne=le,de={class:"header-main"},ie={key:0,class:"devlog-card-content--success"},re={class:"block"},ue={__name:"Card",props:S({cardVisible:{type:Boolean,default:!1}},{name:{default:""},nameModifiers:{},email:{default:""},emailModifiers:{}}),emits:S(["handleClose"],["update:name","update:email"]),setup(m,{emit:d}){const i=m,p=d,e=b("hidden"),t=b(!1),g=b(!1);$(()=>i.cardVisible,n=>{n?e.value="register":e.value="hidden"});const r=T(m,"name"),v=T(m,"email"),l={hidden:{layout:{width:150,height:150}},register:{header:{title:()=>"Get email updates",confirm:async()=>{if(Z.validate(v.value)&&r.value.trim()!==""){e.value="loading";try{const n=`firstName=${encodeURIComponent(r.value)}&email=${encodeURIComponent(v.value)}&desktopfm=${encodeURIComponent("true")}`;await fetch("https://app.loops.so/api/newsletter-form/cltoi0h45002z4vya63qpi6o0",{method:"POST",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),E("Signup"),g.value=!0}catch{e.value="register",t.value=!0,setTimeout(()=>{t.value=!1},500)}}else t.value=!0,setTimeout(()=>{t.value=!1},500)}},layout:{width:280,height:200}},loading:{layout:{width:100,height:100}},success:{layout:{width:150,height:150}}},V=q({...l[e.value].layout}),x=Q(V);return $(e,n=>{Object.assign(V,l[n].layout),n==="loading"&&setTimeout(()=>{e.value="success",setTimeout(()=>{p("handleClose")},1e3)},1e3)}),G("Escape",n=>{p("handleClose")}),(n,u)=>{const F=H,M=R,U=D;return c(),k(A,null,[a("div",{class:h({"devlog-card-overlay":!0,blur:m.cardVisible})},null,2),i.cardVisible?(c(),k("div",{key:0,class:"devlog-card-container",ref:"containerEl",style:J({width:o(x).width+"px",height:o(x).height+"px"})},[a("header",{class:h({"devlog-card-header":!0,visible:!!l[o(e)].header})},[a("button",{class:"header-action visible",onClick:u[0]||(u[0]=()=>n.$emit("handleClose"))},[s(o(Y),{size:"18",strokeWidth:"3",style:{stroke:"#777"}})]),a("div",de,K(l[o(e)].header&&l[o(e)].header.title()),1),a("button",{class:h({"header-action":!0,visible:l[o(e)].header&&!!l[o(e)].header.confirm}),onClick:u[1]||(u[1]=(...f)=>l[o(e)].header.confirm&&l[o(e)].header.confirm(...f))},[s(o(L),{size:"18",strokeWidth:"3",style:{stroke:"#009942"}})],2)],2),a("div",{class:h({"devlog-card":!0,shake:o(t)})},[s(y,{name:"fade"},{default:C(()=>[o(e)==="info"?(c(),w(F,{key:0})):_("",!0)]),_:1}),s(y,{name:"fade"},{default:C(()=>[o(e)==="register"?(c(),w(M,{key:0,name:r.value,"onUpdate:name":u[2]||(u[2]=f=>r.value=f),email:v.value,"onUpdate:email":u[3]||(u[3]=f=>v.value=f),handleSubmit:l.register.header.confirm,showFrequencyOption:!0},null,8,["name","email","handleSubmit"])):_("",!0)]),_:1}),s(y,{name:"fade"},{default:C(()=>[o(e)==="loading"?(c(),w(U,{key:0})):_("",!0)]),_:1}),s(y,{name:"fade"},{default:C(()=>[o(e)==="success"?(c(),k("div",ie,[a("div",re,[s(o(L))])])):_("",!0)]),_:1})],2)],4)):_("",!0)],64)}}},ce=ue,me=""+globalThis.__publicAssetsURL("devlog/dekstopfm-logo.svg"),pe=a("div",{class:"layout-devlog-logo"},[a("img",{src:me})],-1),ve=a("h1",{class:"layout-devlog-title"},"Devlog",-1),ye={__name:"devlog",setup(m){const d=B("devlogCompact"),i=b(!1),p=P(document?document.body:null);return $(i,e=>{p.value=e}),(e,t)=>{const g=ne,r=ce;return c(),k("div",{class:h({"layout-devlog":!0,compact:o(d)})},[s(g,{onHandleFollowClick:t[0]||(t[0]=()=>i.value=!0)}),pe,ve,X(e.$slots,"default"),s(r,{cardVisible:o(i),onHandleClose:t[1]||(t[1]=()=>i.value=!1)},null,8,["cardVisible"])],2)}}};export{ye as default};
